<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>&#x1f9e0; Chapter 6 - Exceptions and Assertions</title>
        <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

/* From extension bierner.markdown-checkbox */
.contains-task-list {
    padding-left: 0;
}

.contains-task-list li {
    margin-left: 24px;
}

.contains-task-list .task-list-item {
    list-style: none;
    padding-left: 0;
    margin-left: 0;
}

.contains-task-list .contains-task-list {
    padding-left: 20px;
} 
/* From extension ezrafree.markdown-preview */
.vscode-body {
  box-sizing: border-box;
  margin: 0 auto;
  max-width: 838px;
  min-width: 320px;
  padding: 20px 40px;
}

/* tables */

.vscode-body table {
  margin-bottom: 12px;
}

.vscode-body th,
.vscode-body td {
  border: 1px solid;
}

.vscode-body td {
  vertical-align: top;
}

/* blockquotes */

.vscode-body blockquote {
  margin: 12px 0 12px 0 !important;
  padding: 5px 16px 5px 10px !important;
}

.vscode-body blockquote p:last-child {
  margin-bottom: 0;
}

/* checkboxes */

.vscode-dark input.task-list-item-checkbox[type="checkbox"]:focus {
  outline: 1px solid rgba(0, 0, 0, 0.2);
}
.vscode-light input.task-list-item-checkbox[type="checkbox"]:focus {
  outline: 1px solid rgba(255, 255, 255, 0.2);
}

.vscode-body input.task-list-item-checkbox[type="checkbox"] {
  background-color: var(--vscode-icon-foreground, #ddd);
  border-radius: .14rem;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  width: 1.2rem;
  height: 1.2rem;
  cursor: pointer;
  position: relative;
  top: .14rem;
}

.vscode-body input.task-list-item-checkbox[type="checkbox"]:checked {
  background-color: var(--vscode-editorInfo-foreground, #409fd6);
  background: var(--vscode-editorInfo-foreground, #409fd6)
    url("data:image/gif;base64,R0lGODlhCwAKAIABAP////3cnSH5BAEKAAEALAAAAAALAAoAAAIUjH+AC73WHIsw0UCjglraO20PNhYAOw==")
    3px 3px no-repeat;
}

.vscode-body input.task-list-item-checkbox[type="checkbox"]:disabled {
  cursor: default;
}

/* kbd elements */

.vscode-body kbd {
  background-color: var(--vscode-editor-background, #444d56) !important;
  border: solid 1px #5e6a77 !important;
  border-radius: 3px !important;
  border-bottom-color: #565c62 !important;
  box-shadow: inset 0 -1px 0 rgb(0 0 0 / 33%),
    inset 0 1px 0 #6f7e8d !important;
  color: var(--vscode-editor-foreground, #fafbfc) !important;
  padding: 5px 8px !important;
  display: inline-block;
  font: 11px "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
  line-height: 10px;
  vertical-align: middle;
}

/* From extension justwe9517.note-markdown-preview */
html body {
  font-family:  Verdana ;
  font-size: 1em;
  /* line-height: 1.4; */
  overflow: initial;
  box-sizing: border-box;
  word-wrap: break-word;
}
.vscode-body {
  padding: 1em 0;
}
html {
  padding: 0.8em 0.4em 0.8em 0.4em !important;
}
body {
  padding: 1em !important;
}
html body > :first-child {
  margin-top: 0;
}
html body h1,
html body h2,
html body h3,
html body h4,
html body h5,
html body h6 {
  line-height: 1.2;
  margin-top: 1em;
  margin-bottom: 16px;
  margin-top: 0 !important;
}

html body h1::after,
html body h2::after,
html body h3::after,
html body h4::after,
html body h5::after,
html body h6::after {
  content: "#";
  font-size: 0.5em;
  padding-left: 10px;
  color: rgba(128, 128, 128, 0.35);
}

html body h1 {
  font-size: 2em;
  font-weight: 300;
  padding-bottom: 0.3em;
  border-bottom: 1px solid rgba(128, 128, 128, 0.35);
}
html body h2 {
  font-size: 1.75em;
  font-weight: 400;
  padding-bottom: 0.3em;
  border-bottom: 1px solid rgba(128, 128, 128, 0.35);
}
html body h3 {
  font-size: 2em;
  font-weight: 500;
}
html body h4 {
  font-size: 1.25em;
  font-weight: 600;
}
html body h5 {
  font-size: 1.1em;
  font-weight: 600;
}
html body h6 {
  font-size: 1em;
  font-weight: 600;
}
html body h1,
html body h2,
html body h3,
html body h4,
html body h5 {
  font-weight: 600;
}
html body h5 {
  font-size: 1em;
}
html body a:not([href]) {
  color: inherit;
  text-decoration: none;
}
html body img {
  max-width: 100%;
}
html body > p {
  margin-top: 0;
  margin-bottom: 16px;
  word-wrap: break-word;
}
html body > ul,
html body > ol {
  margin-bottom: 16px;
}
html body ul,
html body ol {
  padding-left: 2em;
}
html body ul.no-list,
html body ol.no-list {
  padding: 0;
  list-style-type: none;
}
html body ul ul,
html body ul ol,
html body ol ol,
html body ol ul {
  margin-top: 0;
  margin-bottom: 0;
}
html body li {
  margin-bottom: 0;
}
html body li.task-list-item {
  list-style: none;
}
html body li > p {
  margin-top: 0;
  margin-bottom: 0;
}
html body .task-list-item-checkbox {
  margin: 0 0.2em 0.25em -1.8em;
  vertical-align: middle;
}
html body .task-list-item-checkbox:hover {
  cursor: pointer;
}
html body blockquote {
  margin: 16px 0;
  font-size: inherit;
  padding: 6px 12px;
  border-left: 4px solid #43484c;
}
html body blockquote > :first-child {
  margin-top: 0;
}
html body blockquote > :last-child {
  margin-bottom: 0;
}
html body li blockquote {
  margin-top: 5px !important;
  margin-bottom: 5px !important;
}
html body hr {
  height: 3px;
  background-color: rgba(128, 128, 128, 0.35);
  margin: 28px 0;
  border: 0 none;
}
html body table {
  margin: 10px 0 15px 0;
  border-collapse: collapse;
  border-spacing: 0;
  display: block;
  width: min-content;
  max-width: 100%;
  overflow: auto;
  word-break: normal;
  word-break: keep-all;
  border: 1px solid rgba(128, 128, 128, 0.35);
}
html body table th {
  font-weight: bold;
  white-space: nowrap;
}
html body table th {
  border-left: 1px solid rgba(128, 128, 128, 0.35) !important;
  border-bottom: 2px solid rgba(128, 128, 128, 0.35) !important;
  border-top: 0 !important;
  border-right: 0 !important;
  background: rgba(128, 128, 128, 0.15) !important;
}
html body table td {
  border-left: 1px solid rgba(128, 128, 128, 0.35) !important;
  border-bottom: 1px solid rgba(128, 128, 128, 0.35) !important;
  border-top: 0 !important;
  border-right: 0 !important;
  padding: 6px 13px;
  white-space: nowrap;
}
html body table th:first-child,
html body table td:first-child {
  border-left: 0 !important;
}
html body dl {
  padding: 0;
}
html body dl dt {
  padding: 0;
  margin-top: 16px;
  font-size: 1em;
  font-style: italic;
  font-weight: bold;
}
html body dl dd {
  padding: 0 16px;
  margin-bottom: 16px;
}
html body code {
  font-family: Consolas;
    color:yellow;
  padding: 0.2em 0;
}
html body code::before,
html body code::after {
  letter-spacing: -0.2em;
  content: none;
}
html body pre > code {
  padding: 0;
  margin: 0;
  font-size: 1em !important;
  word-break: normal;
  
  background: transparent;
  border: 0;
}
html body .highlight {
  margin-bottom: 16px;
}
html body .highlight pre,
html body pre {
  padding: 1em;
  overflow: auto;
  font-size: 1em !important;
  line-height: 1.4;
  border: #43484c;
  border-radius: 3px;
}
html body .highlight pre {
  margin-bottom: 0;
  word-break: normal;
}
html body pre code,
html body pre tt {
  display: inline;
  max-width: initial;
  padding: 0;
  margin: 0;
  overflow: initial;
  line-height: inherit;
  word-wrap: normal;
  background-color: transparent;
  border: 0;
}
html body pre code:before,
html body pre tt:before,
html body pre code:after,
html body pre tt:after {
  content: normal;
}
html body p,
html body blockquote,
html body ul,
html body ol,
html body dl,
html body pre {
  margin-top: 0;
  margin-bottom: 16px;
}
html body kbd {
  border: 1px solid #43484c;
  border-bottom: 2px solid #35393c;
  padding: 2px 4px;
  border-radius: 3px;
}
html body strong {
  /* color: #569cd6; */
  color: unset;
  text-decoration: underline;
}
.katex-display {
  position: relative;
  overflow: auto;
  border: 1px solid rgba(128, 128, 128, 0.35) !important;
  padding: 15px 10px 10px 10px;
}
.katex-display::before {
  content: "LateX";
  position: absolute;
  top: 0;
  left: 0;
  font-size: 12px;
  background: rgba(128, 128, 128, 0.35) !important;
  padding: 0 5px;
  border-bottom-right-radius: 3px;
  opacity: 1;
  transform: scale(0.75);
  transform-origin: left top;
}

.katex {
  font-size: 1em !important;
}

@media screen and (max-width: 768px) {
  ::-webkit-scrollbar {
    width: 0.4em !important;
    height: 0.4em !important;
  }
  /* ::-webkit-scrollbar-corner {
    background-color: rgba(0, 0, 0, 0.25) !important;
  }
  ::-webkit-scrollbar-thumb {
    background-color: rgba(0, 0, 0, 0.25) !important;
  } */
}

.directory-button {
  position: fixed;
  width: fit-content;
  height: auto;
  background-color: #8181817a;
  top: 1em;
  right: 1em;
  background: var(--vscode-menu-background);
  color: var(--vscode-menu-foreground);
  border: 1px solid var(--vscode-menu-border);
  box-shadow: rgb(0 0 0 / 36%) 0px 2px 4px;
  cursor: pointer;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0.5em;
  font-size: 1em;
  opacity: 0.6;
  line-height: 1;
}

.directory-button::after {
  content: "展开目录";
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
  font-size: 0.6em;
}

.directory-panel {
  display: none;;
  position: fixed;
  top: 1em;
  right: 1em;
  width: 266px;
  max-width: 80%;
  background: var(--vscode-menu-background);
  color: var(--vscode-menu-foreground);
  border: 1px solid var(--vscode-menu-border);
  box-shadow: rgb(0 0 0 / 36%) 0px 2px 4px;
}

.directory-title {
  margin: 0.5em 0.5em 0 0.5em;
  padding-bottom: 0.5em;
  border-bottom: 1px solid var(--vscode-menu-border);
  font-size: 1em;
  position: relative;
  cursor: pointer;
  line-height: 1;
}

.directory-title::after {
  content: '折叠目录';
  opacity: 0.5;
  font-size: 0.6em;
  text-align: right;
  display: block;
}

.directory-frame {
  max-height: 70vh;
  padding: 8px 1px;
  overflow: auto;
}

.directory-panel a {
  display: block;
  line-height: 2;
  padding: 0 10px;
  text-decoration: none;
  color: var(--vscode-menu-selectionForeground);
  height: 25px;
  line-height: 25px;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
  -o-text-overflow: ellipsis;
  font-size: 1em;
}

.directory-panel a:hover {
  background: var(--vscode-menu-selectionBackground);
}

.directory-panel a[data-tag-name="h1"] {
  padding: 0 10px 0 10px;
}
.directory-panel a[data-tag-name="h2"] {
  padding: 0 10px 0 25px;
}
.directory-panel a[data-tag-name="h3"] {
  padding: 0 10px 0 40px;
}
.directory-panel a[data-tag-name="h4"] {
  padding: 0 10px 0 55px;
}
.directory-panel a[data-tag-name="h5"] {
  padding: 0 10px 0 70px;
}
.directory-panel a[data-tag-name="h6"] {
  padding: 0 10px 0 85px;
}
/* From extension ozaki.markdown-github-dark */
/* base.css */
body {
  box-sizing: border-box;
  min-width: 200px;
  max-width: 980px;
  margin: 0 auto;
  padding: 40px;
  border: 1px solid transparent;
}

body blockquote {
  background-color: initial;
}

body code {
  color: inherit;
}

body code > div {
  background: none;
}

body.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

body p,
body blockquote,
body ul,
body ol,
body dl,
body table,
body pre {
  margin-top: 16px;
  margin-bottom: 16px;
}

/* github-markdown.css */
body {
  color-scheme: dark;
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
  margin: 0;
  color: #c9d1d9;
  background-color: #0d1117;
  font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji";
  font-size: 16px;
  line-height: 1.5;
  word-wrap: break-word
}
body .octicon {
  display: inline-block;
  fill: currentColor;
  vertical-align: text-bottom
}
body h1:hover .anchor .octicon-link:before,
body h2:hover .anchor .octicon-link:before,
body h3:hover .anchor .octicon-link:before,
body h4:hover .anchor .octicon-link:before,
body h5:hover .anchor .octicon-link:before,
body h6:hover .anchor .octicon-link:before {
  width: 16px;
  height: 16px;
  content: ' ';
  display: inline-block;
  background-color: currentColor;
  -webkit-mask-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' aria-hidden='true'><path fill-rule='evenodd' d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'></path></svg>");
  mask-image: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' version='1.1' aria-hidden='true'><path fill-rule='evenodd' d='M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z'></path></svg>")
}
body details,
body figcaption,
body figure {
  display: block
}
body summary {
  display: list-item
}
body a {
  background-color: transparent;
  color: #58a6ff;
  text-decoration: none
}
body a:active,
body a:hover {
  outline-width: 0
}
body abbr[title] {
  border-bottom: none;
  -webkit-text-decoration: underline dotted;
  text-decoration: underline dotted
}
body b,
body strong {
  font-weight: 600
}
body dfn {
  font-style: italic
}
body h1 {
  margin: .67em 0;
  font-weight: 600;
  padding-bottom: .3em;
  font-size: 2em;
  border-bottom: 1px solid #21262d
}
body mark {
  background-color: #ff0;
  color: #c9d1d9
}
body small {
  font-size: 90%
}
body sub,
body sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline
}
body sub {
  bottom: -.25em
}
body sup {
  top: -.5em
}
body img {
  border-style: none;
  max-width: 100%;
  box-sizing: content-box;
  background-color: #0d1117
}
body code,
body kbd,
body pre,
body samp {
  font-family: monospace,monospace;
  font-size: 1em
}
body figure {
  margin: 1em 40px
}
body hr {
  box-sizing: content-box;
  overflow: hidden;
  background: 0 0;
  border-bottom: 1px solid #21262d;
  height: .25em;
  padding: 0;
  margin: 24px 0;
  background-color: #30363d;
  border: 0
}
body [type=reset],
body [type=submit],
body html [type=button] {
  -webkit-appearance: button
}
body [type=button]::-moz-focus-inner,
body [type=reset]::-moz-focus-inner,
body [type=submit]::-moz-focus-inner {
  border-style: none;
  padding: 0
}
body [type=button]:-moz-focusring,
body [type=reset]:-moz-focusring,
body [type=submit]:-moz-focusring {
  outline: 1px dotted ButtonText
}
body [type=checkbox],
body [type=radio] {
  box-sizing: border-box;
  padding: 0
}
body [type=number]::-webkit-inner-spin-button,
body [type=number]::-webkit-outer-spin-button {
  height: auto
}
body [type=search] {
  -webkit-appearance: textfield;
  outline-offset: -2px
}
body [type=search]::-webkit-search-cancel-button,
body [type=search]::-webkit-search-decoration {
  -webkit-appearance: none
}
body ::-webkit-input-placeholder {
  color: inherit;
  opacity: .54
}
body ::-webkit-file-upload-button {
  -webkit-appearance: button;
  font: inherit
}
body a:hover {
  text-decoration: underline
}
body hr::before {
  display: table;
  content: ""
}
body hr::after {
  display: table;
  clear: both;
  content: ""
}
body table {
  border-spacing: 0;
  border-collapse: collapse;
  display: block;
  width: max-content;
  max-width: 100%;
  overflow: auto
}
body td,
body th {
  padding: 0
}
body details summary {
  cursor: pointer
}
body details:not([open]) > :not(summary) {
  display: none!important
}
body kbd {
  display: inline-block;
  padding: 3px 5px;
  font: 11px ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;
  line-height: 10px;
  color: #c9d1d9;
  vertical-align: middle;
  background-color: #161b22;
  border: solid 1px rgba(110,118,129,.4);
  border-bottom-color: rgba(110,118,129,.4);
  border-radius: 6px;
  box-shadow: inset 0 -1px 0 rgba(110,118,129,.4)
}
body h1,
body h2,
body h3,
body h4,
body h5,
body h6 {
  margin-top: 30px;
  margin-bottom: 16px;
  font-weight: 600;
  line-height: 1.25

}
body h2 {
  font-weight: 600;
  padding-bottom: .3em;
  font-size: 1.5em;
  border-bottom: 1px solid #21262d
}
body h3 {
  font-weight: 600;
  font-size: 1.25em
}
body h4 {
  font-weight: 600;
  font-size: 1em
}
body h5 {
  font-weight: 600;
  font-size: .875em
}
body h6 {
  font-weight: 600;
  font-size: .85em;
  color: #8b949e
}
body p {
  margin-top: 0;
  margin-bottom: 10px
}
body blockquote {
  margin: 0;
  padding: 0 1em;
  color: #8b949e;
  border-left: .25em solid #30363d
}
body ol,
body ul {
  margin-top: 0;
  margin-bottom: 0;
  padding-left: 2em
}
body ol ol,
body ul ol {
  list-style-type: lower-roman
}
body ol ol ol,
body ol ul ol,
body ul ol ol,
body ul ul ol {
  list-style-type: lower-alpha
}
body dd {
  margin-left: 0
}
body code,
body tt {
  font-family: ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;
  font-size: 12px
}
body pre {
  margin-top: 0;
  margin-bottom: 0;
  font-family: ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;
  font-size: 12px;
  word-wrap: normal
}
body :-ms-input-placeholder {
  color: #484f58;
  opacity: 1
}
body ::-ms-input-placeholder {
  color: #484f58;
  opacity: 1
}
body ::placeholder {
  color: #484f58;
  opacity: 1
}
body .pl-c {
  color: #8b949e
}
body .pl-c1,
body .pl-s .pl-v {
  color: #79c0ff
}
body .pl-e,
body .pl-en {
  color: #d2a8ff
}
body .pl-s .pl-s1,
body .pl-smi {
  color: #c9d1d9
}
body .pl-ent {
  color: #7ee787
}
body .pl-k {
  color: #ff7b72
}
body .pl-pds,
body .pl-s,
body .pl-s .pl-pse .pl-s1,
body .pl-sr,
body .pl-sr .pl-cce,
body .pl-sr .pl-sra,
body .pl-sr .pl-sre {
  color: #a5d6ff
}
body .pl-smw,
body .pl-v {
  color: #ffa657
}
body .pl-bu {
  color: #f85149
}
body .pl-ii {
  color: #f0f6fc;
  background-color: #8e1519
}
body .pl-c2 {
  color: #f0f6fc;
  background-color: #b62324
}
body .pl-sr .pl-cce {
  font-weight: 700;
  color: #7ee787
}
body .pl-ml {
  color: #f2cc60
}
body .pl-mh,
body .pl-mh .pl-en,
body .pl-ms {
  font-weight: 700;
  color: #1f6feb
}
body .pl-mi {
  font-style: italic;
  color: #c9d1d9
}
body .pl-mb {
  font-weight: 700;
  color: #c9d1d9
}
body .pl-md {
  color: #ffdcd7;
  background-color: #67060c
}
body .pl-mi1 {
  color: #aff5b4;
  background-color: #033a16
}
body .pl-mc {
  color: #ffdfb6;
  background-color: #5a1e02
}
body .pl-mi2 {
  color: #c9d1d9;
  background-color: #1158c7
}
body .pl-mdr {
  font-weight: 700;
  color: #d2a8ff
}
body .pl-ba {
  color: #8b949e
}
body .pl-sg {
  color: #484f58
}
body .pl-corl {
  text-decoration: underline;
  color: #a5d6ff
}
body [data-catalyst] {
  display: block
}
body g-emoji {
  font-family: "Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";
  font-size: 1em;
  font-style: normal!important;
  font-weight: 400;
  line-height: 1;
  vertical-align: -.075em
}
body g-emoji img {
  width: 1em;
  height: 1em
}
body::before {
  display: table;
  content: ""
}
body::after {
  display: table;
  clear: both;
  content: ""
}
body > :first-child {
  margin-top: 0!important
}
body > :last-child {
  margin-bottom: 0!important
}
body a:not([href]) {
  color: inherit;
  text-decoration: none
}
body .absent {
  color: #f85149
}
body .anchor {
  float: left;
  padding-right: 4px;
  margin-left: -20px;
  line-height: 1
}
body .anchor:focus {
  outline: 0
}
body blockquote,
body details,
body dl,
body ol,
body p,
body pre,
body table,
body ul {
  margin-top: 0;
  margin-bottom: 16px
}
body blockquote > :first-child {
  margin-top: 0
}
body blockquote > :last-child {
  margin-bottom: 0
}
body sup > a::before {
  content: "["
}
body sup > a::after {
  content: "]"
}
body h1 .octicon-link,
body h2 .octicon-link,
body h3 .octicon-link,
body h4 .octicon-link,
body h5 .octicon-link,
body h6 .octicon-link {
  color: #c9d1d9;
  vertical-align: middle;
  visibility: hidden
}
body h1:hover .anchor,
body h2:hover .anchor,
body h3:hover .anchor,
body h4:hover .anchor,
body h5:hover .anchor,
body h6:hover .anchor {
  text-decoration: none
}
body h1:hover .anchor .octicon-link,
body h2:hover .anchor .octicon-link,
body h3:hover .anchor .octicon-link,
body h4:hover .anchor .octicon-link,
body h5:hover .anchor .octicon-link,
body h6:hover .anchor .octicon-link {
  visibility: visible
}
body h1 code,
body h1 tt,
body h2 code,
body h2 tt,
body h3 code,
body h3 tt,
body h4 code,
body h4 tt,
body h5 code,
body h5 tt,
body h6 code,
body h6 tt {
  padding: 0 .2em;
  font-size: inherit
}
body ol.no-list,
body ul.no-list {
  padding: 0;
  list-style-type: none
}
body ol[type="1"] {
  list-style-type: decimal
}
body ol[type=a] {
  list-style-type: lower-alpha
}
body ol[type=i] {
  list-style-type: lower-roman
}
body div > ol:not([type]) {
  list-style-type: decimal
}
body ol ol,
body ol ul,
body ul ol,
body ul ul {
  margin-top: 0;
  margin-bottom: 0
}
body li > p {
  margin-top: 16px
}
body li + li {
  margin-top: .25em
}
body dl {
  padding: 0
}
body dl dt {
  padding: 0;
  margin-top: 16px;
  font-size: 1em;
  font-style: italic;
  font-weight: 600
}
body dl dd {
  padding: 0 16px;
  margin-bottom: 16px
}
body table th {
  font-weight: 600
}
body table td,
body table th {
  padding: 6px 13px;
  border: 1px solid #30363d
}
body table tr {
  background-color: #0d1117;
  border-top: 1px solid #21262d
}
body table tr:nth-child(2n) {
  background-color: #161b22
}
body table img {
  background-color: transparent
}
body img[align=right] {
  padding-left: 20px
}
body img[align=left] {
  padding-right: 20px
}
body .emoji {
  max-width: none;
  vertical-align: text-top;
  background-color: transparent
}
body span.frame {
  display: block;
  overflow: hidden
}
body span.frame > span {
  display: block;
  float: left;
  width: auto;
  padding: 7px;
  margin: 13px 0 0;
  overflow: hidden;
  border: 1px solid #30363d
}
body span.frame span img {
  display: block;
  float: left
}
body span.frame span span {
  display: block;
  padding: 5px 0 0;
  clear: both;
  color: #c9d1d9
}
body span.align-center {
  display: block;
  overflow: hidden;
  clear: both
}
body span.align-center > span {
  display: block;
  margin: 13px auto 0;
  overflow: hidden;
  text-align: center
}
body span.align-center span img {
  margin: 0 auto;
  text-align: center
}
body span.align-right {
  display: block;
  overflow: hidden;
  clear: both
}
body span.align-right > span {
  display: block;
  margin: 13px 0 0;
  overflow: hidden;
  text-align: right
}
body span.align-right span img {
  margin: 0;
  text-align: right
}
body span.float-left {
  display: block;
  float: left;
  margin-right: 13px;
  overflow: hidden
}
body span.float-left span {
  margin: 13px 0 0
}
body span.float-right {
  display: block;
  float: right;
  margin-left: 13px;
  overflow: hidden
}
body span.float-right > span {
  display: block;
  margin: 13px auto 0;
  overflow: hidden;
  text-align: right
}
body code,
body tt {
  padding: .2em .4em;
  margin: 0;
  font-size: 85%;
  background-color: rgba(110,118,129,.4);
  border-radius: 6px
}
body code br,
body tt br {
  display: none
}
body del code {
  text-decoration: inherit
}
body pre code {
  font-size: 100%
}
body pre > code {
  padding: 0;
  margin: 0;
  word-break: normal;
  white-space: pre;
  background: 0 0;
  border: 0
}
body .highlight {
  margin-bottom: 16px
}
body .highlight pre {
  margin-bottom: 0;
  word-break: normal
}
body .highlight pre,
body pre {
  padding: 16px;
  overflow: auto;
  font-size: 85%;
  line-height: 1.45;
  background-color: #161b22;
  border-radius: 6px
}
body pre code,
body pre tt {
  display: inline;
  max-width: auto;
  padding: 0;
  margin: 0;
  overflow: visible;
  line-height: inherit;
  word-wrap: normal;
  background-color: transparent;
  border: 0
}
body .csv-data td,
body .csv-data th {
  padding: 5px;
  overflow: hidden;
  font-size: 12px;
  line-height: 1;
  text-align: left;
  white-space: nowrap
}
body .csv-data .blob-num {
  padding: 10px 8px 9px;
  text-align: right;
  background: #0d1117;
  border: 0
}
body .csv-data tr {
  border-top: 0
}
body .csv-data th {
  font-weight: 600;
  background: #161b22;
  border-top: 0
}
body .footnotes {
  font-size: 12px;
  color: #8b949e;
  border-top: 1px solid #30363d
}
body .footnotes ol {
  padding-left: 16px
}
body .footnotes li {
  position: relative
}
body .footnotes li:target::before {
  position: absolute;
  top: -8px;
  right: -8px;
  bottom: -8px;
  left: -24px;
  pointer-events: none;
  content: "";
  border: 2px solid #1f6feb;
  border-radius: 6px
}
body .footnotes li:target {
  color: #c9d1d9
}
body .footnotes .data-footnote-backref g-emoji {
  font-family: monospace
}
body [hidden] {
  display: none!important
}
body ::-webkit-calendar-picker-indicator {
  filter: invert(50%)
}

/* node_modules/highlight.js/styles/github-dark.css */
pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}/*!
  Theme: GitHub Dark
  Description: Dark theme as seen on github.com
  Author: github.com
  Maintainer: @Hirse
  Updated: 2021-05-15

  Outdated base version: https://github.com/primer/github-syntax-dark
  Current colors taken from GitHub's CSS
*/.hljs{color:#c9d1d9;background:#0d1117}.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable.language_{color:#ff7b72}.hljs-title,.hljs-title.class_,.hljs-title.class_.inherited__,.hljs-title.function_{color:#d2a8ff}.hljs-attr,.hljs-attribute,.hljs-literal,.hljs-meta,.hljs-number,.hljs-operator,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-variable{color:#79c0ff}.hljs-meta .hljs-string,.hljs-regexp,.hljs-string{color:#a5d6ff}.hljs-built_in,.hljs-symbol{color:#ffa657}.hljs-code,.hljs-comment,.hljs-formula{color:#8b949e}.hljs-name,.hljs-quote,.hljs-selector-pseudo,.hljs-selector-tag{color:#7ee787}.hljs-subst{color:#c9d1d9}.hljs-section{color:#1f6feb;font-weight:700}.hljs-bullet{color:#f2cc60}.hljs-emphasis{color:#c9d1d9;font-style:italic}.hljs-strong{color:#c9d1d9;font-weight:700}.hljs-addition{color:#aff5b4;background-color:#033a16}.hljs-deletion{color:#ffdcd7;background-color:#67060c}
</style>
        
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item {
    list-style-type: none;
}

.task-list-item-checkbox {
    margin-left: -20px;
    vertical-align: middle;
    pointer-events: none;
}
</style>
        
    </head>
    <body class="vscode-body vscode-light">
        <link href="../styles.css" rel="stylesheet"></link>
<h1 id="-chapter-6---exceptions-and-assertions">🧠 Chapter 6 - Exceptions and Assertions</h1>
<h2 id="-61-reviewing-exceptions">🟥 6.1 Reviewing Exceptions</h2>
<h3 id="-terminology">🟡 Terminology</h3>
<ul>
<li>All exceptions/errors extend java.lang.Object</li>
<li><code>RuntimeException</code> is a subclass of <code>Exception</code>, it is AKA unchecked exception and there is no requirement to be caught (even though you can).</li>
<li>Checked exceptions are <code>Exception</code> classes which DO NOT extend <code>RuntimeException</code>.</li>
<li><code>Error</code> classes are not <code>Exceptions</code> but a seperate subclass of <code>Throwable</code></li>
</ul>
<h3 id="-ocp-exceptions">🟡 OCP Exceptions</h3>
<ul>
<li>The pre-requiste exceptions from the OCA exam include:</li>
</ul>
<ol>
<li><code>NumberFormatException</code> - thrown by program when attempting to convert string to numeric type</li>
<li><code>IllegalArgumentException</code> - thrown by program</li>
<li><code>NullPointerException</code> - thrown by JVM</li>
<li><code>ArrayIndexOutOfBoundsException</code> - thrown by JVM</li>
<li><code>ArithmeticException</code> - thrown by JVM when trying to divide by zero</li>
<li><code>ClassCastException</code> - thrown by JVM when attempting to make cast an object to an invalid type</li>
</ol>
<br>
<ul>
<li>The <strong>OCP Checked Exceptions</strong> are:</li>
</ul>
<ol>
<li><code>java.text.ParseException</code></li>
</ol>
<ul>
<li>converting a number to string</li>
</ul>
<ol start="2">
<li><code>java.io.IOException</code>/<code>java.io.FileNotFoundException</code>/<code>java.io.NotSerializableException</code></li>
</ol>
<ul>
<li>All io exceptions can be assumed as checked</li>
</ul>
<ol start="3">
<li><code>java.sql.SQLException</code></li>
</ol>
<ul>
<li>All sql exception can be assumed as checked</li>
</ul>
<ul>
<li>The <strong>OCP Runtime Exceptions</strong> are:</li>
</ul>
<ol>
<li><code>java.lang.ArrayStoreException</code></li>
</ol>
<ul>
<li>When attempting to add incorrect type to an array</li>
</ul>
<ol start="2">
<li><code>java.time.DateTimeException</code></li>
</ol>
<ul>
<li>Recieved when an invalid format string for a date</li>
</ul>
<ol start="3">
<li><code>java.util.MissingResourceException</code> - trying to access a resource or bundle that does not exist</li>
<li><code>java.lang.UnsupportedOperationException</code></li>
<li><code>java.lang.IllegalStaceException</code></li>
</ol>
<h1 id="-chapter-7---concurrency">🧠 Chapter 7 - Concurrency</h1>
<h2 id="-71-introducing-threads">🟥 7.1 Introducing Threads</h2>
<h3 id="-runnable">🟡 Runnable</h3>
<ul>
<li>The runnable interface has a single method <code>void run()</code></li>
<li>Examples include:</li>
</ul>
<pre><code class="language-java"><span class="hljs-type">Runnable</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> () -&gt; counter++;
<span class="hljs-type">Runnable</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> () -&gt; Sytem.out.print(<span class="hljs-string">&quot;hello&quot;</span>);
<span class="hljs-type">Runnable</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> () -&gt; { <span class="hljs-keyword">return</span>; };
<span class="hljs-type">Runnable</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> () -&gt; { };
</code></pre>
<ul>
<li>The <code>Executor</code> interface has an <code>void execute(Runnable r)</code> method.</li>
<li>Attempting to use a Callable or assigning it to a variable results in a compilation error:</li>
</ul>
<pre><code class="language-java"><span class="hljs-type">Runnable</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> () -&gt; counter++;
Callable&lt;Integer&gt; c = () -&gt; counter++;
service.execute(r);
service.execute(c); <span class="hljs-comment">// COMPILATION ERROR</span>
Future&lt;?&gt; f = service.execute(r); <span class="hljs-comment">// COMPILATION ERROR</span>
</code></pre>
<h3 id="-creating-threads">🟡 Creating Threads</h3>
<ul>
<li>You can execute a thread using the <code>java.lang.Thread</code> class</li>
<li>You can execute a thread in 2 ways</li>
</ul>
<ol>
<li>Instantiate the thread class with a Runnable in the constructor and call <code>run()</code>:</li>
</ol>
<pre><code class="language-java"><span class="hljs-type">Thread</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(()-&gt;System.out.print(<span class="hljs-string">&quot;hello&quot;</span>));
t.run(); <span class="hljs-comment">// prints hello</span>
</code></pre>
<ol start="2">
<li>Extend Thread class and call the <code>.start()</code> method:</li>
</ol>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PrintThread</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Thread</span> {
	<span class="hljs-meta">@Override</span>
	<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
		System.out.println(<span class="hljs-string">&quot;running from run&quot;</span>);
	}
	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
		<span class="hljs-type">PrintThread</span> <span class="hljs-variable">pt</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrintThread</span>();
		<span class="hljs-keyword">new</span> <span class="hljs-title class_">PrintThread</span>().start(); <span class="hljs-comment">// running from run</span>
	}
}
</code></pre>
<h3 id="-polling-with-sleep">🟡 Polling With Sleep</h3>
<ul>
<li>We have access to the <code>Thread.sleep(long)</code> which makes the CPU idle</li>
</ul>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException {
    System.out.println(<span class="hljs-string">&quot;before sleep&quot;</span>);
    Thread.sleep(<span class="hljs-number">1000</span>);
    System.out.println(<span class="hljs-string">&quot;after sleep&quot;</span>); <span class="hljs-comment">// prints after 1 second passes</span>
}
</code></pre>
<hr>
<h2 id="-72-creating-threads-with-executorservice">🟥 7.2 Creating Threads with ExecutorService</h2>
<h3 id="-single-thread-executor">🟡 Single Thread Executor</h3>
<ul>
<li>We can use the Concurrency API to create a single thread to execute multiple tasks</li>
<li>We call <code>Executors.newSingleThreadExecutor()</code> which gives us an instance of <code>ExecutorService</code>:</li>
</ul>
<pre><code class="language-java"><span class="hljs-type">ExecutorService</span> <span class="hljs-variable">service</span> <span class="hljs-operator">=</span> Executors.newSingleThreadExecutor();
service.execute(()-&gt;System.out.println(<span class="hljs-string">&quot;begin&quot;</span>));
service.execute(()-&gt; {
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">5</span>;i++) {
		<span class="hljs-keyword">if</span> (i==<span class="hljs-number">1</span>) {
			<span class="hljs-keyword">try</span> {
				Thread.sleep(<span class="hljs-number">1000</span>);
			} <span class="hljs-keyword">catch</span> (InterruptedException e) { 
				<span class="hljs-comment">// handle</span>
			}
		}
		System.out.println(i);
	}
})
service.execute(()-&gt;System.out.println(<span class="hljs-string">&quot;end&quot;</span>));
</code></pre>
<ul>
<li>This will ALWAYS print in a sequential order:</li>
</ul>
<pre><code class="language-java">begin
<span class="hljs-number">0</span>
<span class="hljs-number">1</span>
<span class="hljs-number">2</span>
<span class="hljs-number">3</span>
<span class="hljs-number">4</span>
end
</code></pre>
<ul>
<li>If we used a <code>Executors.fixedThreadPool(10)</code> instead it will print the following:</li>
</ul>
<pre><code class="language-java">begin
end
<span class="hljs-number">0</span>
<span class="hljs-number">4</span>
<span class="hljs-number">2</span>
<span class="hljs-number">1</span>
<span class="hljs-number">3</span>
</code></pre>
<ul>
<li>Now the ordering is no longer predictable!</li>
</ul>
<h3 id="-submitting-tasks">🟡 Submitting Tasks</h3>
<ul>
<li>The <code>ExecutorService</code> has the following methods:</li>
</ul>
<pre><code class="language-java"><span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">(Runnable r)</span>;
Future&lt;?&gt; submit(Runnable r);
Future&lt;T&gt; <span class="hljs-title function_">submit</span><span class="hljs-params">(Callable&lt;T&gt; c)</span>;
List&lt;Future&lt;T&gt;&gt; <span class="hljs-title function_">invokeAll</span><span class="hljs-params">(Collection&lt;? extends Callable&lt;T&gt;&gt; c)</span>;
T <span class="hljs-title function_">invokeAny</span><span class="hljs-params">(Collection&lt;? extends Callable&lt;T&gt;&gt; c)</span>;
</code></pre>
<ul>
<li>Here are some examples of using these methods:</li>
</ul>
<pre><code class="language-java">service = Executors.newSingleThreadExecutor();
Future&lt;Integer&gt; f1 = service.submit(c);
<span class="hljs-comment">// Future&lt;Integer&gt; f2 = service.execute(r); // COMPILER ERROR</span>
Future&lt;?&gt; f2 = service.submit(r);
service.execute(r);
System.out.println(f1.get()); <span class="hljs-comment">// 1</span>
System.out.println(f2.get()); <span class="hljs-comment">// null</span>
System.out.println(counter); <span class="hljs-comment">// 3</span>
List&lt;Callable&lt;Integer&gt;&gt; list = Arrays.asList(c,c,c);
List&lt;Future&lt;Integer&gt;&gt; returnedList = service.invokeAll(list);
<span class="hljs-type">Integer</span> <span class="hljs-variable">f</span> <span class="hljs-operator">=</span> service.invokeAny(list);
System.out.println(f); <span class="hljs-comment">// 7</span>
List&lt;Integer&gt; l = getTheValuesOfFutureList( returnedList);
System.out.println(l); <span class="hljs-comment">// [4,5,6]</span>
</code></pre>
<h3 id="-waiting-for-results">🟡 Waiting for Results</h3>
<ul>
<li>When we use the <code>submit()</code> method we return a future object. If we use the <code>get()</code> method, there is a chance that the program will halt!</li>
<li>We can get around this by using an overloaded version of get()!</li>
<li>We can determine whether the task which has been submitted is actually complete with the following methods:</li>
</ul>
<pre><code class="language-java"><span class="hljs-type">boolean</span> <span class="hljs-title function_">isDone</span><span class="hljs-params">()</span>;
<span class="hljs-type">boolean</span> <span class="hljs-title function_">isCancelled</span><span class="hljs-params">()</span>;
<span class="hljs-type">boolean</span> <span class="hljs-title function_">cancel</span><span class="hljs-params">()</span>; <span class="hljs-comment">// attempts to cancel the task</span>
V <span class="hljs-title function_">get</span><span class="hljs-params">()</span>; <span class="hljs-comment">// retrieves result of task, waiting endlessly if not yet available</span>
V <span class="hljs-title function_">get</span><span class="hljs-params">(<span class="hljs-type">long</span> millis, TimeUnit unit)</span>; <span class="hljs-comment">// retrieves result in alotted time, otherwise throws TimeoutException</span>
</code></pre>
<ul>
<li>E.g.:</li>
</ul>
<pre><code class="language-java"><span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-variable">counter</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> InterruptedException, ExecutionException {
	<span class="hljs-type">ExecutorService</span> <span class="hljs-variable">service</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
	<span class="hljs-keyword">try</span> {
		service = Executors.newSingleThreadExecutor();
		Future&lt;?&gt; result = service.submit(() -&gt; {
			<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">500</span>;i++) counter++;
		});
		result.get(<span class="hljs-number">10</span>, TimeUnit.SECONDS);
		System.out.println(<span class="hljs-string">&quot;Reached&quot;</span>);
	} <span class="hljs-keyword">catch</span> (TimeOutException e) {
		System.out.println(<span class="hljs-string">&quot;Not reached in time&quot;</span>);
	} <span class="hljs-keyword">finally</span> {
		<span class="hljs-keyword">if</span>(service!=<span class="hljs-literal">null</span>) service.shutdown();
	}
}
</code></pre>
<h3 id="-scheduling-tasks">🟡 Scheduling Tasks</h3>
<ul>
<li>We have a subinterface <code>ScheduledExecutorService</code> which has methods for running tasks on a schedule:</li>
</ul>
<pre><code class="language-java"><span class="hljs-type">ExecutorService</span> <span class="hljs-variable">serviceUsingWrongReference</span> <span class="hljs-operator">=</span> Executors.newSingleThreadScheduledExecutor();
<span class="hljs-comment">// serviceUsingWrongReference.schedule(); // COMPILER ERROR</span>
<span class="hljs-type">ScheduledExecutorService</span> <span class="hljs-variable">scheduledService</span>
    <span class="hljs-operator">=</span> Executors.newSingleThreadScheduledExecutor();
</code></pre>
<ul>
<li>We have the fdllowing methods for scheduling methods with a delay:</li>
</ul>
<pre><code class="language-java">schedule(Callable&lt;V&gt; callable, <span class="hljs-type">long</span> delay, TimeUnit unit);
schedule(Runnable callable, <span class="hljs-type">long</span> delay, TimeUnit unit);
</code></pre>
<ul>
<li>We can assign these two methods to Future objects:</li>
</ul>
<pre><code class="language-java">Callable&lt;Integer&gt; c = () -&gt; <span class="hljs-number">1</span>;
<span class="hljs-type">Runnable</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> () -&gt; System.out.println(<span class="hljs-string">&quot;hello&quot;</span>);
Future&lt;Integer&gt; f = scheduledService.schedule(c, <span class="hljs-number">1</span>, TimeUnit.SECONDS);
Future&lt;?&gt; f2 = scheduledService.schedule(r, <span class="hljs-number">1</span>, TimeUnit.SECONDS);
<span class="hljs-comment">// prints hello</span>
System.out.println(f.get()); <span class="hljs-comment">// 1</span>
System.out.println(f2.get()); <span class="hljs-comment">// null</span>
</code></pre>
<ul>
<li>There also two methods which schedule a runnable task on repeat:</li>
</ul>
<pre><code class="language-java">scheduleAtFixedRate(Runnable r, <span class="hljs-type">long</span> initialDelay, <span class="hljs-type">long</span> period, TimeUnit unit);
scheduledAtFixedDelay(Runnable r, <span class="hljs-type">long</span> initialDelay, <span class="hljs-type">long</span> delay, TimeUnit unit);
</code></pre>
<ul>
<li>E.g.:</li>
</ul>
<pre><code class="language-java">Future&lt;?&gt; f3 = scheduledService.scheduleAtFixedRate(r, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, TimeUnit.SECONDS);
<span class="hljs-comment">// this will print hello exactly every second		</span>

Future&lt;?&gt; f4 = scheduledService.scheduleWithFixedDelay(r, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, TimeUnit.SECONDS);
<span class="hljs-comment">// this will print hello exactly 1 second after the previous hello is printed</span>
</code></pre>
<hr>
<h2 id="-73-synchronizing-data-access">🟥 7.3 Synchronizing Data Access</h2>
<h3 id="-atomic-classes">🟡 Atomic Classes</h3>
<ul>
<li>We have the following Atomic classes in the Concurrency API:</li>
</ul>
<ol>
<li><code>AtomicBoolean</code></li>
<li><code>AtomicInteger</code></li>
<li><code>AtomicLong</code></li>
<li><code>AtomicReference</code></li>
<li><code>AtomicIntegerArray</code></li>
<li><code>AtomicLongArray</code></li>
<li><code>AtomicReferenceArray</code></li>
</ol>
<ul>
<li>Here are common methods for these classes:</li>
</ul>
<pre><code class="language-java">get();
set();
getAndSet(newValue); <span class="hljs-comment">// gets old value while setting new value</span>
incrementAndGet(); <span class="hljs-comment">// increments and returns the incremented value</span>
getAndIncrement(); <span class="hljs-comment">// gets old value and increments after</span>
decrementAndGet(); <span class="hljs-comment">// decrements and returns decremented value</span>
getAndDecrement(); <span class="hljs-comment">// gets old value and decrements after</span>
</code></pre>
<ul>
<li>Here is an example of using an Atomic class to ensure a counter is kept THREAD-SAFE and to prevent race conditions:</li>
</ul>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SheepManager</span> {
	<span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">sheepCount</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>(<span class="hljs-number">0</span>);
	<span class="hljs-keyword">void</span> <span class="hljs-title function_">incrementAndReport</span><span class="hljs-params">()</span> {
		System.out.print(sheepCount.incrementAndGet()+<span class="hljs-string">&quot; &quot;</span>);
	}
	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] argS)</span> {
		<span class="hljs-type">SheepManager</span> <span class="hljs-variable">manager</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SheepManager</span>();
		<span class="hljs-type">ExecutorService</span> <span class="hljs-variable">service</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
		<span class="hljs-keyword">try</span> {
			service = Executors.newFixedThreadPool(<span class="hljs-number">20</span>);
			<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++)
				service.submit(()-&gt;manager.incrementAndReport()))
		} <span class="hljs-keyword">finally</span> {
			<span class="hljs-keyword">if</span>(service!=<span class="hljs-literal">null</span>) service.shutdown();
		}
	}
}
</code></pre>
<ul>
<li>Here are samples of what would be printed:</li>
</ul>
<pre><code class="language-java"><span class="hljs-number">1</span> <span class="hljs-number">10</span> <span class="hljs-number">9</span> <span class="hljs-number">3</span> <span class="hljs-number">2</span> <span class="hljs-number">8</span> <span class="hljs-number">7</span> <span class="hljs-number">4</span> <span class="hljs-number">6</span> <span class="hljs-number">5</span> 
<span class="hljs-number">2</span> <span class="hljs-number">10</span> <span class="hljs-number">9</span> <span class="hljs-number">7</span> <span class="hljs-number">8</span> <span class="hljs-number">6</span> <span class="hljs-number">5</span> <span class="hljs-number">4</span> <span class="hljs-number">1</span> <span class="hljs-number">3</span> 
</code></pre>
<h3 id="-synchronized-methods">🟡 Synchronized Methods</h3>
<ul>
<li>We can synchronize access to methods using <code>synchronized</code> keyword. The following are equivalent:</li>
</ul>
<pre><code class="language-java"><span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">print</span><span class="hljs-params">()</span> {
	System.out.print(<span class="hljs-string">&quot;hello&quot;</span>);
}
<span class="hljs-keyword">void</span> <span class="hljs-title function_">incrementAndReport</span><span class="hljs-params">()</span> {
	<span class="hljs-keyword">synchronized</span>(<span class="hljs-built_in">this</span>) {
		System.out.print(<span class="hljs-string">&quot;hello&quot;</span>);}
}
</code></pre>
<hr>
<h2 id="-74-using-concurrent-collections">🟥 7.4 Using Concurrent Collections</h2>
<h3 id="-concurrent-classes">🟡 Concurrent Classes</h3>
<ul>
<li>We have the following Concurrent Collection Classes:</li>
</ul>
<pre><code class="language-java">ConcurrentHashMap <span class="hljs-comment">// ConcurrentMap</span>
ConcurrentLinkedDeque <span class="hljs-comment">// Deque</span>
ConcurrentLinkedQueue <span class="hljs-comment">// Queue</span>
ConcurrentSkipListMap <span class="hljs-comment">// ConcurrentMap/SortedMap/NavigableMap</span>
ConcurrentSkipListSet <span class="hljs-comment">// SortedSet/NavigableSet</span>
CopyOnWriteArrayList <span class="hljs-comment">// List</span>
CopyOnWriteArraySet <span class="hljs-comment">// Set</span>
LinkedBlockingDeque <span class="hljs-comment">// BlockingQueue/BlockingDeque</span>
LinkedBlockingQueue <span class="hljs-comment">// BlockkingQueue</span>
</code></pre>
<h3 id="-concurrentmodificationexception">🟡 ConcurrentModificationException</h3>
<ul>
<li>Using Concurrent classes enables us to avoid <code>ConcurrentModificationException</code> when workking with for-loops:</li>
</ul>
<pre><code class="language-java">Map&lt;String, Integer&gt; food = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
food.putAll(Map.of(<span class="hljs-string">&quot;pizza&quot;</span>, <span class="hljs-number">1</span>, <span class="hljs-string">&quot;chicken&quot;</span>, <span class="hljs-number">2</span>));
<span class="hljs-keyword">for</span> (String key: food.keySet()) {
	food.remove(key); <span class="hljs-comment">// throws ConcurrentModificationException</span>
}
</code></pre>
<ul>
<li>If we used <code>new ConcurrentHashMap&lt;&gt;()</code> instead, we would not have this problem!💡</li>
</ul>
<h3 id="-blocking-queues">🟡 Blocking Queues</h3>
<ul>
<li>The <code>LinkedlockingDeque</code> and <code>LinkedBlockingQueue</code> implement the <code>BlockingQueue</code> and <code>BlockingDeque</code> interfaces</li>
</ul>
<ol>
<li><code>BlockingQueue</code> waiting methods:</li>
</ol>
<pre><code class="language-java"><span class="hljs-type">boolean</span> <span class="hljs-title function_">offer</span><span class="hljs-params">(E e, <span class="hljs-type">long</span> timeout, TimeUnit unit)</span>; 
<span class="hljs-comment">// adds item to queue in alotted time if space is available</span>

E <span class="hljs-title function_">poll</span><span class="hljs-params">(<span class="hljs-type">long</span> timeout, TimeUnit unit)</span>;
<span class="hljs-comment">// retrieves and removes an item from the queue in alotted time if available</span>
</code></pre>
<ul>
<li>These methods can throw an <code>InterruptedException</code> as they can be interrupted before finishing:</li>
</ul>
<pre><code class="language-java"><span class="hljs-keyword">try</span> {
	BlockingQueue&lt;Integer&gt; blockingQueue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedBlockingQueue</span>&lt;&gt;();
	blockingQueue.offer(<span class="hljs-number">39</span>);
	blockingQueue.offer(<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,TimeUnit.SECONDS);
	System.out.println(blockingQueue.poll(<span class="hljs-number">10</span>, TimeUnit.SECONDS));
} <span class="hljs-keyword">catch</span> (InterruptedException e) {
	<span class="hljs-comment">// handle</span>
}
</code></pre>
<ol start="2">
<li><code>BlockingDeque</code> waiting methods:</li>
</ol>
<pre><code class="language-java"><span class="hljs-type">boolean</span> <span class="hljs-title function_">offerFirst</span><span class="hljs-params">(E e, <span class="hljs-type">long</span> timeout, TimeUnit unit)</span>;
<span class="hljs-comment">// adds item to front of queue</span>

<span class="hljs-type">boolean</span> <span class="hljs-title function_">offerLast</span><span class="hljs-params">(E e, <span class="hljs-type">long</span> timeout, TimeUnit unit)</span>;
<span class="hljs-comment">// adds item to back of queue</span>

E <span class="hljs-title function_">pollFirst</span><span class="hljs-params">(<span class="hljs-type">long</span> timeout, TimeUnit unit)</span>; 
<span class="hljs-comment">// retrieves and removes element at front of queue</span>

E <span class="hljs-title function_">pollLast</span><span class="hljs-params">(<span class="hljs-type">long</span> timeout, TimeUnit unit)</span>;
<span class="hljs-comment">// retrieves and removes element at back of queue</span>
</code></pre>
<ul>
<li>Again, <code>InterruptedException</code> must be caught and handled!</li>
</ul>
<h3 id="-skiplist-collections">🟡 SkipList Collections</h3>
<ul>
<li>The <code>ConcurrentSkipListMap</code> and <code>ConcurrentSkipListSet</code> are concurrent versions of <code>TreeMap</code> and <code>TreeSet</code></li>
<li>These</li>
</ul>
<h3 id="-copyonwrite-collections">🟡 CopyOnWrite Collections</h3>
<ul>
<li>The <code>CopyOnWriteArrayList</code> and <code>CopyOnWriteSet</code> are concurrent versions of Lists and Sets.</li>
<li>These classes let us add/remove elements in a for loop, the iterator takes a snapshot of the elements and loops over these elements during each iteration</li>
</ul>
<pre><code class="language-java">List&lt;Integer&gt; regularList = Arrays.asList(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>);

<span class="hljs-comment">/* The following code throws exception:
for(int i:l1) 
	l1.add(i); // UnsupportedOperationException
*/</span>

List&lt;Integer&gt; l2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CopyOnWriteArrayList</span>&lt;&gt;(l1);
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i:l2) {
	System.out.print(i+ <span class="hljs-string">&quot; &quot;</span>); <span class="hljs-comment">// 1 2 3</span>
	l2.add(i);
}
System.out.println(l2); <span class="hljs-comment">// [1,2,3,1,2,3]</span>

Set&lt;Integer&gt; s3 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CopyOnWriteArraySet</span>&lt;&gt;();
s3.addAll(l2);
<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i:s3) {
	System.out.print(i+ <span class="hljs-string">&quot; &quot;</span>); <span class="hljs-comment">// 1 2 3</span>
	s3.add(<span class="hljs-number">4</span>);
}
System.out.println(<span class="hljs-string">&quot;\n&quot;</span>+s3); <span class="hljs-comment">// [1,2,3,4]</span>
</code></pre>
<h3 id="-obtaining-synchronized-collections">🟡 Obtaining Synchronized Collections</h3>
<ul>
<li>We can convert non-concurrent collections into synchronized versions using the following methods:</li>
</ul>
<pre><code class="language-java">synchronizedCollection(Collection&lt;T&gt; c)
synchronizedList(List&lt;T&gt; list)
synchronizedMap(Map&lt;Kk,V&gt; map)
synchronizedNavigableMap(NavigableMap&lt;K,V&gt; map)
synchronizedNavigableSet(NavigableSet&lt;T&gt; set)
synchronziedSet(Set&lt;T&gt; set)
synchronizedSortedMap(SortedMap&lt;K,V&gt; map)
synchronizedSortedSet(SortedSet&lt;T&gt; set)
</code></pre>
<ul>
<li>E.g.:</li>
</ul>
<pre><code class="language-java">List&lt;Integer&gt; list = Collections.synchronizedList(
	<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(Arrays.asList(<span class="hljs-number">4</span>,<span class="hljs-number">3</span>,<span class="hljs-number">42</span>)));
</code></pre>
<hr>
<h2 id="-75-working-with-parallel-streams">🟥 7.5 Working with Parallel Streams</h2>
<h3 id="-creating-parallel-streams">🟡 Creating Parallel Streams</h3>
<ul>
<li>You can create a paralle stream by calling <code>.parallel()</code> on an existing stream or calling <code>.parallelStream()</code> on a collection:</li>
</ul>
<pre><code class="language-java">Stream&lt;Integer&gt; stream = Arrays.asList(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>).parallelStream();
</code></pre>
<h3 id="-processing-tasks-in-parallel">🟡 Processing Tasks in Parallel</h3>
<ul>
<li>Using a parallel stream means that results CAN be unpredictable</li>
</ul>
<pre><code class="language-java">Arrays.asList(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>)
	.parallelStream()
	.sorted()
	.forEach(System.out::println);
<span class="hljs-comment">// PRINTS: 4 1 6 5 2 3</span>
</code></pre>
<ul>
<li>If tasks can be done in parallel and independently, we will always know the result!❗</li>
</ul>
<pre><code class="language-java">List&lt;String&gt; list = Arrays.asList(<span class="hljs-string">&quot;Jackal&quot;</span>, <span class="hljs-string">&quot;Monkey&quot;</span>, <span class="hljs-string">&quot;Tiger&quot;</span>)
	.parallelStream()
	.map(String::toUpperCase)
	.collect(Collectors.toList());
System.out.println(list); <span class="hljs-comment">// [JACKAL, MONKEY, TIGER]</span>
</code></pre>
<h3 id="-processing-parallel-reductions">🟡 Processing Parallel Reductions</h3>
<ul>
<li>With parallel streams, behaviour can not be defined:</li>
</ul>
<pre><code class="language-java">Arrays.asList(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>).stream().findAny(); <span class="hljs-comment">// will ALWAYS be 1</span>
Arrays.asList(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>).parallelStream().findAny(); <span class="hljs-comment">// unable to predict the result</span>
</code></pre>
<ul>
<li>E.g.:</li>
</ul>
<pre><code class="language-java"><span class="hljs-type">int</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> Arrays.asList(<span class="hljs-string">&quot;1234&quot;</span>,<span class="hljs-string">&quot;56&quot;</span>,<span class="hljs-string">&quot;789&quot;</span>)
	.parallelStream()
	.reduce(<span class="hljs-number">0</span>,
	(n,str)-&gt; n + str.length(),
	(str1,str2)-&gt; str1+str2);
System.out.println(x); <span class="hljs-comment">// 9</span>

<span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> Arrays.asList(<span class="hljs-string">&quot;abc&quot;</span>,<span class="hljs-string">&quot;de&quot;</span>,<span class="hljs-string">&quot;fgh&quot;</span>)
	.parallelStream()
	.reduce(<span class="hljs-string">&quot;&quot;</span>, (result,s)-&gt;result+s.toUpperCase(), (s1,s2)-&gt;s1+s2);
System.out.println(str); <span class="hljs-comment">// ABCDEFGH</span>
</code></pre>
<h3 id="using-collect-method">Using <code>.collect()</code> Method</h3>
<ul>
<li>A parallel stream can be reduced efficiently using the collect method, providing the following requirements are met:</li>
</ul>
<ol>
<li>The stream is parallel</li>
<li>The collect() paramaeter has the <code>Collector.Characteristics.CONCURRENT</code> characteristic</li>
<li>The stream is unordered, OR the collect() parameter has the <code>Collector.Characteristic.UNORDERED</code> characteristic</li>
</ol>
<ul>
<li>The <code>Collectors.toSet()</code> method is an example of a collector which DOES NOT have the <code>CONCURRENT</code> charactteristic:</li>
</ul>
<pre><code class="language-java">Stream&lt;String&gt; stream = Stream.of(<span class="hljs-string">&quot;w&quot;</span>,<span class="hljs-string">&quot;o&quot;</span>,<span class="hljs-string">&quot;l&quot;</span>,<span class="hljs-string">&quot;f&quot;</span>)
		.parallel();
System.out.println(Collectors.toSet().characteristics());
<span class="hljs-comment">// [UNORDERED, IDENTITY_FINISH]</span>

Set&lt;String&gt; set =
	stream.collect(Collectors.toSet());
System.out.println(set); <span class="hljs-comment">// [f, w, l, o]</span>
</code></pre>
<ul>
<li>The Collectors class does have 2 collectors which are both <code>CONCURRENT</code> AND <code>UNORDERED</code>:</li>
</ul>
<ol>
<li><code>Collectors.toConcurrentMap()</code></li>
<li><code>Collectors.groupingByConcurrent()</code></li>
</ol>
<ul>
<li>E.g.:</li>
</ul>
<pre><code class="language-java">Stream&lt;String&gt; ohMy = Stream.of(<span class="hljs-string">&quot;lions&quot;</span>,<span class="hljs-string">&quot;tigers&quot;</span>,<span class="hljs-string">&quot;bears&quot;</span>)
	.parallel();
ConcurrentMap&lt;Integer,String&gt; map = ohMy.collect(
	Collectors.toConcurrentMap(s-&gt;s.length(),
	k-&gt;k,
	(s1,s2)-&gt;s1+<span class="hljs-string">&quot;,&quot;</span>+s2)
);
System.out.println(map); <span class="hljs-comment">// {5=bears,lions, 6=tigers}</span>
</code></pre>
<pre><code class="language-java">Stream&lt;String&gt; parallelStream = Stream.of(<span class="hljs-string">&quot;lions&quot;</span>, <span class="hljs-string">&quot;tigers&quot;</span>, <span class="hljs-string">&quot;bears&quot;</span>).parallel();
ConcurrentMap&lt;Integer, List&lt;String&gt;&gt; groupedMap = parallelStream
	.collect(Collectors.groupingByConcurrent(str-&gt;str.length()));
System.out.println(groupedMap); <span class="hljs-comment">// {5=[lions, bears], 6=[tigers]}</span>
</code></pre>
<hr>
<h2 id="-76-managing-concurrent-processes">🟥 7.6 Managing Concurrent Processes</h2>
<h3 id="-creating-a-cyclicbarrier">🟡 Creating a CyclicBarrier</h3>
<ul>
<li>We can use the <code>CyclicBarrierLimit</code> class to create thresholds in a method to ensure that a type of task if not done until another is done:</li>
</ul>
<pre><code class="language-java"><span class="hljs-keyword">void</span> <span class="hljs-title function_">performTask</span><span class="hljs-params">(CyclicBarrier c1)</span> {
	<span class="hljs-keyword">try</span> {
		System.out.println(<span class="hljs-string">&quot;Task 1&quot;</span>);
		c1.await();
		System.out.println(<span class="hljs-string">&quot;Task 2&quot;</span>);
	}
}
<span class="hljs-comment">// MAIN METHOD:</span>
<span class="hljs-type">ExecutorService</span> <span class="hljs-variable">service</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
<span class="hljs-keyword">try</span> {
	service = Executors.newFixedThreadPool(<span class="hljs-number">4</span>);
	<span class="hljs-type">CyclicBarrier</span> <span class="hljs-variable">c1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CyclicBarrier</span>(<span class="hljs-number">2</span>);
	<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">4</span>;i++)
		service.submit(()-&gt;performTask(c1));
} <span class="hljs-keyword">finally</span> {
	<span class="hljs-keyword">if</span>(service!=<span class="hljs-literal">null</span>) service.shutdown();
}
</code></pre>
<ul>
<li>This prints the following:</li>
</ul>
<pre><code class="language-java">Task <span class="hljs-number">1</span>
Task <span class="hljs-number">1</span>
Task <span class="hljs-number">1</span>
Task <span class="hljs-number">1</span>
Task <span class="hljs-number">2</span>
Task <span class="hljs-number">2</span>
Task <span class="hljs-number">2</span>
Task <span class="hljs-number">2</span>
</code></pre>
<h3 id="-applying-the-forkjoin-framework">🟡 Applying the Fork/Join Framework</h3>
<ul>
<li>The Fork/Join framework requires us to perform three steps:</li>
</ul>
<ol>
<li>Createa ForkJoinTask instance using <code>RecursiveAction</code>/`RecursiveTask``</li>
<li>Create a <code>ForkJoinPool</code> instance</li>
<li>Invoke the ForkJoinTask instance using the pool</li>
</ol>
<ul>
<li>We have two ForkJoinTask classes:</li>
</ul>
<pre><code class="language-java"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RecursiveAction</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ForkJoinTask</span> {
	<span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">compute</span><span class="hljs-params">()</span>;
}
<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RecursiveTask</span>&lt;V&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ForkJoinTask</span>&lt;V&gt; {
	<span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> T <span class="hljs-title function_">compute</span><span class="hljs-params">()</span>;
}
</code></pre>
<h4 id="-recursiveaction-example-">🟢 RecursiveAction Example 🟢</h4>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WeighAnimalAction</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RecursiveAction</span> {
	<span class="hljs-keyword">private</span> <span class="hljs-type">int</span> start;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> end;
    <span class="hljs-keyword">private</span> Double[] weights;
    <span class="hljs-comment">// CONSTRUCTOR HERE</span>
	
	<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">compute</span><span class="hljs-params">()</span> {
		<span class="hljs-keyword">if</span>(end-start&lt;=<span class="hljs-number">3</span>){
			System.out.println(<span class="hljs-string">&quot;BASE CASE FROM: &quot;</span>+start
            +<span class="hljs-string">&quot;, TO: &quot;</span>+end);
            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=start;i&lt;end;i++) {
                weights[i] = (<span class="hljs-type">double</span>)<span class="hljs-keyword">new</span> <span class="hljs-title class_">Random</span>().nextInt(<span class="hljs-number">100</span>);
                System.out.println(<span class="hljs-string">&quot;Animal &quot;</span>+i+<span class="hljs-string">&quot; weighs &quot;</span>+weights[i]);
            }
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-type">int</span> <span class="hljs-variable">middle</span> <span class="hljs-operator">=</span> start+((end-start)/<span class="hljs-number">2</span>);
            System.out.println(<span class="hljs-string">&quot;[start=&quot;</span>+start+<span class="hljs-string">&quot;,middle=&quot;</span>+middle+<span class="hljs-string">&quot;,end=&quot;</span>+end+<span class="hljs-string">&quot;]&quot;</span>);
            invokeAll(<span class="hljs-keyword">new</span> <span class="hljs-title class_">WeighAnimalAction</span>(weights,start,middle),
                      <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeighAnimalAction</span>(weights,middle,end));
		}
	}
}

<span class="hljs-comment">// MAIN METHOD:</span>
Double[weights] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Double</span>[<span class="hljs-number">10</span>];
ForkJoinTask&lt;?&gt; task = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeighAnimalAction</span>(weights,<span class="hljs-number">0</span>,<span class="hljs-number">10</span>);
<span class="hljs-type">ForkJoinPool</span> <span class="hljs-variable">pool</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ForkJoinPool</span>();
pool.invoke(task);
</code></pre>
<ul>
<li>This prints the following:</li>
</ul>
<pre><code>[start=0,middle=5,end=10]
[start=0,middle=2,end=5]
BASE CASE FROM: 0, TO: 2
[start=5,middle=7,end=10]
BASE CASE FROM: 2, TO 5
BASE CASE FROM: 5, TO 7
BASE CASE FROM: 7, TO 10
Animal 0 weighs 53.0
Animal 1 weighs 75.0
Animal 2 weighs 41.0
Animal 5 weighs 56.0
Animal 3 weighs 87.0
Animal 7 weighs 35.0
Animal 4 weighs 59.0
Animal 8 weighs 68.0
Animal 6 weighs 56.0
Animal 9 weighs 9.0
</code></pre>
<h4 id="-recursivetask-example-">🟢 RecursiveTask Example 🟢</h4>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WeighAnimalTask</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RecursiveTask</span>&lt;Double&gt; {
	<span class="hljs-keyword">private</span> <span class="hljs-type">int</span> start;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> end;
    <span class="hljs-keyword">private</span> Double[] weights;
    <span class="hljs-comment">// CONSTRUCTOR HERE</span>

	<span class="hljs-keyword">protected</span> Double <span class="hljs-title function_">compute</span><span class="hljs-params">()</span> {
		<span class="hljs-keyword">if</span> (end-start&lt;=<span class="hljs-number">3</span>) {
			System.out.println(<span class="hljs-string">&quot;BASE CASE FROM: &quot;</span>+start+<span class="hljs-string">&quot;, TO: &quot;</span>+end);
			<span class="hljs-type">double</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
			<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i=start;i&lt;end;i++) {
				weights[i] = (<span class="hljs-type">double</span>)<span class="hljs-keyword">new</span> <span class="hljs-title class_">Random</span>().nextInt(<span class="hljs-number">100</span>);
				System.out.println(<span class="hljs-string">&quot;Animal Weighed: &quot;</span>+i);
				sum += weights[i];
			}
		} <span class="hljs-keyword">else</span> {
			<span class="hljs-type">int</span> <span class="hljs-variable">middle</span> <span class="hljs-operator">=</span> start+((start-end)/<span class="hljs-number">2</span>);
			System.out.println(<span class="hljs-string">&quot;[start=&quot;</span>+start+<span class="hljs-string">&quot;,middle=&quot;</span>+middle+<span class="hljs-string">&quot;,end=&quot;</span>+end+<span class="hljs-string">&quot;]&quot;</span>);
			RecursiveTask&lt;Double&gt; otherTask = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeighAnimalTask</span>(weights,start,middle);
			otherTask.fork();
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeighAnimalTask</span>(weights,middle,end).compute()+otherTask.join();
		}
	}
}

<span class="hljs-comment">// MAIN METHOD:</span>
Double[] weights = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Double</span>[<span class="hljs-number">10</span>];
ForkJoinTask&lt;Double&gt; task = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeighAnimalTask</span>(weights,<span class="hljs-number">0</span>,weights.length);
<span class="hljs-type">ForkJoinPool</span> <span class="hljs-variable">pool</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ForkJoinPool</span>();
<span class="hljs-type">Double</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> pool.invoke(task);
System.out.println(<span class="hljs-string">&quot;Sum: &quot;</span>+sum);
</code></pre>
<ul>
<li>This prints the following:</li>
</ul>
<pre><code>[start=0,middle=5,end=10]
[start=5,middle=7,end=10]
BASE CASE FROM: 7, TO: 10
[start=0,middle=2,end=5]
BASE CASE FROM: 5, TO: 7
BASE CASE FROM: 2, TO: 5
BASE CASE FROM: 0, TO: 2
Animal: 7 weighed 0.0
Animal: 8 weighed 40.0
Animal: 9 weighed 29.0
Animal: 2 weighed 69.0
Animal: 3 weighed 83.0
Animal: 5 weighed 71.0
Animal: 0 weighed 55.0
Animal: 1 weighed 45.0
Animal: 6 weighed 49.0
Animal: 4 weighed 87.0
Sum: 528.0
</code></pre>
<ul>
<li>If the <code>.join()</code> method were to be called directly after fork, the application would generate single-threader performance:</li>
</ul>
<pre><code class="language-java"><span class="hljs-type">int</span> <span class="hljs-variable">middle</span> <span class="hljs-operator">=</span> start+((start-end)/<span class="hljs-number">2</span>);
System.out.println(<span class="hljs-string">&quot;[start=&quot;</span>+start+<span class="hljs-string">&quot;,middle=&quot;</span>+middle+<span class="hljs-string">&quot;,end=&quot;</span>+end+<span class="hljs-string">&quot;]&quot;</span>);
RecursiveTask&lt;Double&gt; otherTask = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeighAnimalTask</span>(weights,start,middle);
otherTask.fork().join(); <span class="hljs-comment">// DO NOT DO!!!!</span>
<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeighAnimalTask</span>(weights,middle,end).compute()+otherTask;
</code></pre>
<hr>
<h2 id="-77-identifying-threading-problems">🟥 7.7 Identifying Threading Problems</h2>
<ul>
<li>Liveliness is the property of an application not encountering unexpected delays</li>
<li>Deadlock is when a resource is blocked from being used from a thread</li>
<li>Starvation occurs when a thread is perpetually denied access to a shared resouce as a result of other threads constantly taking the resource</li>
<li>Livelock occurs when two or more threads are blocked forever but appear active. This is often the result of two threads trying to attempt to resolve a deadlock</li>
<li>Race conditions are when two or more threads try to complete a related task at the same time. It is the undesirablee result which occurs when two tasks which should be done sequentially are done at the same time</li>
</ul>

        
        <script async type="text/javascript">
/* From extension justwe9517.note-markdown-preview */
function getList() {
    let list = document.querySelectorAll("h1, h2, h3, h4, h5, h6");
    let result = [];
    for (let i = 0; i < list.length; i++) {
        let node = list[i];
        result.push({
            title: node.innerHTML,
            href: '#' + node.id,
            tagName: node.tagName.toLowerCase()
        });
    }
    return result;
}

window.onload = function () {
    let bodyElement = document.getElementsByTagName('body')[0];
    let directoryButton = document.createElement('div');
    let directoryPanel = document.createElement('div');
    let directoryTitle = document.createElement('div');
    let directoryFrame = document.createElement('div');
    directoryButton.className = 'directory-button';
    directoryPanel.className = 'directory-panel';
    bodyElement.appendChild(directoryButton);
    bodyElement.appendChild(directoryPanel);
    directoryPanel.appendChild(directoryTitle);
    directoryPanel.appendChild(directoryFrame);
    directoryTitle.className = 'directory-title';
    directoryFrame.className = 'directory-frame';

    directoryTitle.onclick = (event) => {
        directoryPanel.style.display = 'none';
        event.stopPropagation();
        event.preventDefault();
        return false;
    }
    directoryButton.onclick = (event) => {
        directoryPanel.style.display = 'block';
        event.stopPropagation();
        event.preventDefault();
        return false;
    }

    let builder = () => {
        let list = getList();
        directoryFrame.innerHTML = '';
        for (let i = 0; i < list.length; i++) {
            let aElement = document.createElement('a');
            aElement.className = 'goto-button';
            aElement.innerHTML = list[i].title;
            aElement.title = list[i].title;
            aElement.href = list[i].href;
            aElement.setAttribute('data-tag-name', list[i].tagName);
            directoryFrame.appendChild(aElement);
        }
    };

    let timeout = 400;
    let resetTimeout = undefined;
    let resetAction = () => {
        clearTimeout(resetTimeout);
        resetTimeout = setTimeout(() => {
            builder();
        }, timeout);
    };

    new MutationObserver(() => {
        resetAction()
    }).observe(bodyElement, { attributes: true, subtree: true });

    builder();
}
</script>

    </body>
    </html>